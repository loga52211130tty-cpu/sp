<select id="drugSelect"></select>
<input type="text" id="newName">
<input type="time" id="newTime">
<button onclick="addDrug()">新增</button>

<table id="drugTable">
  <thead><tr><th>序號</th><th>藥品</th><th>日期</th><th>時間</th><th>已吃</th><th>操作</th></tr></thead>
  <tbody></tbody>
</table>

<script>
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwxOl74ue1pG5rHSSueIwP5gMrA05lgTmk9PN1vSRzAYkcHPKHyNvTLNeAij2kvnYrv/exec';

async function fetchMain(){
  const res = await fetch(WEB_APP_URL);
  const json = await res.json();
  const tbody = document.querySelector('#drugTable tbody');
  tbody.innerHTML = '';
  json.data.forEach((item, idx)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${idx+1}</td><td>${item.name}</td><td>${item.date}</td><td>${item.time}</td>
      <td><input type="checkbox" data-row-index="${item.rowIndex}" ${item.done?'checked':''} onchange="toggleDone(this)"></td>
      <td><button onclick="deleteDrug(${item.rowIndex})">刪除</button></td>`;
    tbody.appendChild(tr);
  });
}
fetchMain();
</script>
